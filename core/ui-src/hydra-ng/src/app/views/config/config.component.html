<div class="p-6">
  <!-- Header with Advanced Toggle -->
  <div class="flex justify-between items-center mb-6">
    <h2 class="text-2xl font-bold text-gray-900">Configuration</h2>
    <div class="flex items-center gap-4">
      <div class="flex items-center gap-2">
        <p-toggleSwitch
          [ngModel]="showAdvanced()"
          (ngModelChange)="toggleAdvanced()"
        ></p-toggleSwitch>
        <label class="text-sm font-medium text-gray-700">
          Show Advanced Settings
        </label>
      </div>
    </div>
  </div>
  
  <!-- Loading State -->
  <div *ngIf="isLoading()" class="flex flex-col items-center justify-center py-12">
    <p-progressSpinner></p-progressSpinner>
    <p class="mt-4 text-gray-600">Loading configuration...</p>
  </div>
  
  <!-- Config Content -->
  <div *ngIf="!isLoading()" class="space-y-6">
    <div class="card">
      <p-tabs [value]="activeTabId" (valueChange)="setActiveTab($event)">
        <p-tablist>
          <p-tab *ngFor="let tab of tabs" [value]="tab.id">{{ tab.label }}</p-tab>
        </p-tablist>
        <p-tabpanels>
          <p-tabpanel value="main">
            <app-main-config-tab
              [showAdvanced]="showAdvanced()"
              (dirtyChange)="onFormDirtyChange($event)"
              (validChange)="onFormValidChange($event)">
            </app-main-config-tab>
          </p-tabpanel>
          <p-tabpanel value="auth">
            <app-auth-config-tab
              [showAdvanced]="showAdvanced()"
              (dirtyChange)="onFormDirtyChange($event)"
              (validChange)="onFormValidChange($event)">
            </app-auth-config-tab>
          </p-tabpanel>
          <p-tabpanel value="searching">
            <app-searching-config-tab
              [showAdvanced]="showAdvanced()"
              (dirtyChange)="onFormDirtyChange($event)"
              (validChange)="onFormValidChange($event)">
            </app-searching-config-tab>
          </p-tabpanel>
          <p-tabpanel value="categories">
            <app-categories-config-tab
              [showAdvanced]="showAdvanced()"
              (dirtyChange)="onFormDirtyChange($event)"
              (validChange)="onFormValidChange($event)">
            </app-categories-config-tab>
          </p-tabpanel>
          <p-tabpanel value="downloading">
            <app-downloading-config-tab
              [showAdvanced]="showAdvanced()"
              (dirtyChange)="onFormDirtyChange($event)"
              (validChange)="onFormValidChange($event)">
            </app-downloading-config-tab>
          </p-tabpanel>
          <p-tabpanel value="indexers">
            <app-indexers-config-tab
              [showAdvanced]="showAdvanced()"
              (dirtyChange)="onFormDirtyChange($event)"
              (validChange)="onFormValidChange($event)">
            </app-indexers-config-tab>
          </p-tabpanel>
          <p-tabpanel value="notifications">
            <app-notifications-config-tab
              [showAdvanced]="showAdvanced()"
              (dirtyChange)="onFormDirtyChange($event)"
              (validChange)="onFormValidChange($event)">
            </app-notifications-config-tab>
          </p-tabpanel>
        </p-tabpanels>
      </p-tabs>
    </div>
    
    <!-- Save Button -->
    <div class="flex justify-end">
      <p-button
        label="{{ isSaving() ? 'Saving...' : 'Save Configuration' }}"
        [disabled]="!hasUnsavedChanges() || isSaving()"
        (onClick)="saveConfig()"
        [loading]="isSaving()"
        icon="pi pi-save">
      </p-button>
    </div>
  </div>
</div> 